# 아키텍처 요소 테스트하기

육각형 아키텍처의 테스트 전략에 대해서 얘기한다  
아키텍처의 각 요소들을 테스트할 수 있는 테스트 유형에 대해 논의할 것이다

## 테스트 피라미드

<img width="706" alt="테스트 피라미드" src="https://github.com/wikibook/clean-architecture/assets/17154958/945e8c29-c9a5-4752-8db5-d402108880d1">

<center>테스트 피라미드에 따르면 비용이 많이 드는 테스트는 지양하고 비용이 적게 드는 테스트를 많이 만들어야 한다.</center>

기본 전제는 만드는 비용이 적고, 유지보수하기 쉽고, 빨리 실행되고, 안정적인 작은 크기의 테스트들에 대해 높은 커버리지를 유지해야 한다는 것이다  
이 테스트는 하나의 '단위'(일반적으로 하나의 클래스)가 제대로 동작하는지 확인할 수 있는 단위 테스트들이다.

테스트 피라미드는 테스트가 비싸질수록 테스트의 커버리지 목표는 낮게 잡아야 한다는 것을 보여준다. 그렇지 않으면 새로운 기능을 만드는 것보다 테스트를 만드는 데 시간을 더 쓰게 되기 때문이다.

**단위 테스트**: 일반적으로 하나의 클래스를 인스턴스화하고 해당 클래스의 인터페이스를 통해 기능들을 테스트한다. 만약 테스트 중인 클래스가 다른 클래스에 의존한다면 의존되는 클래스들은 인스턴스화하지 않고 테스트하는 동안 필요한 작업들을 흉내 내는 목(mock)으로 대체한다.

**통합 테스트**: 연결된 여러 유닛을 인스턴스화하고 시작점이 되는 클래스의 인터페이스로 데이터를 보낸 후 유닛들의 네트워크가 기대한대로 잘 동작하는지 검증한다.  
이 책에서 정의한 통합 테스트에는 두 계층 간의 경계를 걸쳐서 테스트할 수 있기 때문에 객체 네트워크가 완전하지 않거나 어떤 시점에서는 목을 대상으로 수행해야 한다.

**시스템 테스트**: 애플리케이션을 구성하는 모든 객체 네트워크를 가동시켜 특정 유스케이스가 전 계층에서 잘 동작하는지 검증한다.  
시스템 테스트 위에는 애플리케이션의 UI를 포함하는 엔드투엔드(end-to-end) 테스트층이 있을 수 있다. 하지만 이 책에서는 다루지 않는다.

## 단위 테스트로 도메인 엔티티 테스트하기

도메인 엔티티의 행동은 다른 클래스에 거의 의존하지 않기 때문에 다른 종류의 테스트는 필요하지 않다.

## 단위 테스트로 유스케이스 테스트하기

